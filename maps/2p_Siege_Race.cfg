#textdomain wesnoth-gse
#define TEMSK_MECENARY_EVENT ROLE
    [event]
        name=moveto
        id=temsk_mercenaries{ROLE}
        first_time_only=no
        [filter]
            side=1,2
            [filter_location]
                [filter]
                    side=4
                    role={ROLE}
                [/filter]
                radius=1
            [/filter_location]
        [/filter]
        [message]
            side=$side_number
            canrecruit=yes
            message= _ "You are their kinsmen, why aren't you fighting us?"
        [/message]
        [message]
        	role={ROLE}
            message= _ "Kinsmen!? You couldn't find a worse insult, ogre! We don't want to have anything in common with these cowardly Krad weaklings, who forgot the true ancestry, the forefathers. You are attacking them, aren't you? I'll gladly help you, provided that you pay me 95 gold."
        [/message]
        [store_gold]
            variable=actualgold
            side=$side_number
        [/store_gold]
        {IF_VAR actualgold less_than 95 (
        [then]
        [message]
            side=$side_number
            canrecruit=yes
            message= _ "I can't afford your services right now."
        [/message]
        [message]
        	role={ROLE}
            message= _ "Come back when you loot some gold then. We'll be staying at this camp in the meantime."
        [/message]
        [/then]
        [else]
        [message]
            side=$side_number
            canrecruit=yes
            message=_"Hmmmm... should I hire them?"
            [option]
                image="icons/coins_copper.png"
                description=_"Yes (costs 95 gold)"
                [command]
                [sound]
                    name=gold.ogg
                [/sound]
    
                [gold]
                    amount=-95
                    side=$side_number
                [/gold]
                [modify_unit]
                    [filter]
                    	side=4
                        role={ROLE}
                    [/filter]
                    side=$side_number
                [/modify_unit]
                [message]
                    role={ROLE}
                    message= _"(to his men) Alright lads, time to show Krad the power of the true warriors, the warriors of Temsk!"
                [/message]
                [/command]
            [/option]
            [option]
                image="attacks/blank-attack.png"
                description=_"No"
                [command]
                    [message]
                     	role={ROLE}
                        message= _"Your loss. If you change your mind, we'll still be staying here for a while."
                    [/message]
                [/command]
            [/option]
        [/message]
        [/else]
        )}
    [/event]
#enddef
#define TUMEN_MECENARY_EVENT ROLE
    [event]
        name=moveto
        id=temsk_mercenaries{ROLE}
        first_time_only=no
        [filter]
            side=1,2
            [filter_location]
                [filter]
                    side=4
                    role={ROLE}
                [/filter]
                radius=1
            [/filter_location]
        [/filter]
        [message]
            side=$side_number
            canrecruit=yes
            message= _ "Hey, stepnians, how about joining the siege?"
        [/message]
        [message]
        	role={ROLE}
            message= _ "We are always happy to plunder the humans, but the city is well defended, none of our hordes could take it. We don't want to risk our asses for nothing. Pay us 95 gold and then we'll join you. "
        [/message]
        [store_gold]
            variable=actualgold
            side=$side_number
        [/store_gold]
        {IF_VAR actualgold less_than 95 (
        [then]
        [message]
            side=$side_number
            canrecruit=yes
            message= _ "I can't afford your services right now."
        [/message]
        [message]
        	role={ROLE}
            message= _ "Come back when you loot some gold then. We'll be staying at this camp in the meantime."
        [/message]
        [/then]
        [else]
        [message]
            side=$side_number
            canrecruit=yes
            message=_"Hmmmm... should I hire them?"
            [option]
                image="icons/coins_copper.png"
                description=_"Yes (costs 95 gold)"
                [command]
                [sound]
                    name=gold.ogg
                [/sound]
    
                [gold]
                    amount=-95
                    side=$side_number
                [/gold]
                [modify_unit]
                    [filter]
                    	side=4
                        role={ROLE}
                    [/filter]
                    side=$side_number
                [/modify_unit]
                [message]
                    role={ROLE}
                    message= _"(to his men) All right bandits, it's time to loot this town!"
                [/message]
                [/command]
            [/option]
            [option]
                image="attacks/blank-attack.png"
                description=_"No"
                [command]
                    [message]
                     	role={ROLE}
                        message= _"Your loss. If you change your mind, we'll still be staying here for a while."
                    [/message]
                [/command]
            [/option]
        [/message]
        [/else]
        )}
    [/event]
#enddef

[multiplayer]
    id=steppe_2p_siege_race
    name= _ "GSE - 2p — Siege Race"
    description= _ "Ogre crusaders surrounded the city of the Northerners. Now the two Pans want to have a contest: whoever captures the citadel first will take the city. For the sake of victory, the Pans are ready to do anything, even exterminate each other's armies if they have to."
    map_data="{~add-ons/1The_Great_Steppe_Era/maps/Siege_Race_2p.map}"
    victory_when_enemies_defeated=no
    force_lock_settings=no
    turns=-1
    allow_era=The_Great_Steppe_Era_AoH
#to prevent people joining the map without GSE installed:
    require_scenario=yes

    experience_modifier=70%

    random_start_time=no

    {SCENARIO_MUSIC siege_of_laurelmor.ogg}
#ifdef STEPPE_MUSIC
    {EXTRA_SCENARIO_MUSIC through_the_gates.ogg}
#endif
    {EXTRA_SCENARIO_MUSIC legends_of_the_north.ogg}
    {EXTRA_SCENARIO_MUSIC the_city_falls.ogg}
    {EXTRA_SCENARIO_MUSIC loyalists.ogg}

    {DEFAULT_SCHEDULE_DAWN}

#added the eventloader here just in case someone plays the map with a non-GSE era
    [load_resource]
        id=GSE_resource
    [/load_resource]
    
    [side]
        side=1
        controller=human
        allow_player=yes
        team_name=Pan_South
        user_team_name= _ "Pan Burke the Scarpotbelly"
        color=black
        color_lock=yes
        leader_lock=yes
        faction_lock=yes
        faction=kingdom_aoh
        allow_player=yes
        type=Kingdom_Pan
        id=Pan_South
        name=_ "Pan Burke the Scarpotbell"
        unrenameable=yes
        hidden=no
        fog=no
        shroud=no
        village_gold=4
        village_support=3
        gold=400
    [/side]
    [side]
        side=2
        controller=human
        allow_player=yes
        team_name=Pan_North
        user_team_name= _ "Pan Drokk the Fireburp"
        color=white
        color_lock=yes
        leader_lock=yes
        faction_lock=yes
        faction=kingdom_aoh
        allow_player=yes
        type=Kingdom_Pan
        id=Pan_North
        name=_ "Pan Drokk the Fireburp"
        unrenameable=yes
        hidden=no
        fog=no
        shroud=no
        village_gold=4
        village_support=3
        gold=400
    [/side]
    [side]
        controller=ai
        allow_player=no
        side=3
        canrecruit=yes
        gold=200
        village_gold=3
        village_support=3
        id=slav_leader
        type=Slav_Knyaz_Great_Warrior
        max_moves=0
        recruit=Slav_Archer,Slav_Militia,Slav_Marksman,Slav_Guard,Slav_Woodsman
        faction=Custom
        faction_lock=yes
        team_name=krad
        user_team_name= _ "Northerners"
        gold_lock="true"
        color=red

        [unit]
            facing="se"
            type="Tall_Woodwall"
            x=21
            y=13
        [/unit]
        [unit]
            facing="s"
            type="Tall_Woodwall"
            x=22
            y=13
        [/unit]
        [unit]
            facing="n"
            type="Tall_Woodwall"
            x=23
            y=13
        [/unit]
        [unit]
            facing="se"
            type="Tall_Woodwall"
            x=23
            y=32
        [/unit]
        [unit]
            facing="nw"
            type="Tall_Woodwall"
            x=22
            y=31
        [/unit]
        [unit]
            facing="se"
            type="Tall_Woodwall"
            x=21
            y=32
        [/unit]
        [unit]
            facing="s"
            type="Slav_Fortress"
            x=24
            y=31
        [/unit]
        [unit]
            facing="s"
            type="Slav_Fortress"
            x=20
            y=31
        [/unit]
        [unit]
            facing="ne"
            type="Slav_Fortress"
            x=20
            y=13
        [/unit]
        [unit]
            facing="se"
            type="Slav_Fortress"
            x=24
            y=13
        [/unit]
        [unit]
            facing="se"
            type="Slav_Fortress"
            x=31
            y=17
        [/unit]
        [unit]
            facing="s"
            type="Slav_Fortress"
            x=32
            y=18
        [/unit]
        [unit]
            facing="n"
            type="Slav_Fortress"
            x=13
            y=17
        [/unit]
        [unit]
            facing="se"
            type="Slav_Fortress"
            x=12
            y=18
        [/unit]
        [unit]
            facing="nw"
            type="Slav_Fortress"
            x=32
            y=26
        [/unit]
        [unit]
            facing="n"
            type="Slav_Fortress"
            x=31
            y=28
        [/unit]
        [unit]
            facing="sw"
            type="Slav_Fortress"
            x=12
            y=26
        [/unit]
        [unit]
            facing="se"
            type="Slav_Fortress"
            x=13
            y=28
        [/unit]
        [unit]
            facing="nw"
            type="Slav_Outpost"
            x=32
            y=21
        [/unit]
        [unit]
            facing="sw"
            type="Slav_Outpost"
            x=32
            y=23
        [/unit]
        [unit]
            facing="n"
            type="Slav_Outpost"
            x=12
            y=21
        [/unit]
        [unit]
            facing="nw"
            type="Slav_Outpost"
            x=12
            y=23
        [/unit]
        [unit]
            facing="nw"
            type="Slav_Outpost"
            x=16
            y=29
        [/unit]
        [unit]
            facing="s"
            type="Slav_Outpost"
            x=28
            y=29
        [/unit]
        [unit]
            facing="nw"
            type="Slav_Outpost"
            x=16
            y=15
        [/unit]
        [unit]
            facing="ne"
            type="Slav_Outpost"
            x=28
            y=15
        [/unit]
        [unit]
            facing="se"
            type="Slav_Fortress"
            x=20
            y=15
        [/unit]
        [unit]
            facing="sw"
            type="Slav_Fortress"
            x=24
            y=15
        [/unit]
        [unit]
            facing="sw"
            type="Slav_Fortress"
            x=14
            y=20
        [/unit]
        [unit]
            facing="se"
            type="Slav_Fortress"
            x=14
            y=24
        [/unit]
        [unit]
            facing="se"
            type="Slav_Fortress"
            x=30
            y=20
        [/unit]
        [unit]
            facing="sw"
            type="Slav_Fortress"
            x=30
            y=24
        [/unit]
        [unit]
            facing="sw"
            type="Slav_Fortress"
            x=24
            y=29
        [/unit]
        [unit]
            facing="s"
            type="Slav_Fortress"
            x=20
            y=29
        [/unit]
        [unit]
            facing="ne"
            type="Slav_Guard_Tower"
            x=26
            y=30
        [/unit]
        [unit]
            facing="nw"
            type="Slav_Guard_Tower"
            x=18
            y=30
        [/unit]
        [unit]
            facing="sw"
            type="Slav_Guard_Tower"
            x=26
            y=14
        [/unit]
        [unit]
            facing="nw"
            type="Slav_Guard_Tower"
            x=18
            y=14
        [/unit]
        [unit]
            facing="nw"
            type="Woodwall"
            x=25
            y=31
        [/unit]
        [unit]
            facing="ne"
            type="Woodwall"
            x=27
            y=30
        [/unit]
        [unit]
            facing="se"
            type="Woodwall"
            x=30
            y=28
        [/unit]
        [unit]
            facing="s"
            type="Woodwall"
            x=29
            y=29
        [/unit]
        [unit]
            facing="s"
            type="Woodwall"
            x=31
            y=27
        [/unit]
        [unit]
            facing="sw"
            type="Woodwall"
            x=32
            y=24
        [/unit]
        [unit]
            facing="nw"
            type="Woodwall"
            x=32
            y=25
        [/unit]
        [unit]
            facing="sw"
            type="Woodwall"
            x=32
            y=22
        [/unit]
        [unit]
            facing="sw"
            type="Woodwall"
            x=32
            y=19
        [/unit]
        [unit]
            facing="nw"
            type="Woodwall"
            x=32
            y=20
        [/unit]
        [unit]
            facing="sw"
            type="Woodwall"
            x=31
            y=18
        [/unit]
        [unit]
            facing="nw"
            type="Woodwall"
            x=30
            y=16
        [/unit]
        [unit]
            facing="nw"
            type="Woodwall"
            x=29
            y=16
        [/unit]
        [unit]
            facing="se"
            type="Woodwall"
            x=27
            y=15
        [/unit]
        [unit]
            facing="s"
            type="Woodwall"
            x=25
            y=14
        [/unit]
        [unit]
            facing="sw"
            type="Woodwall"
            x=19
            y=14
        [/unit]
        [unit]
            facing="sw"
            type="Woodwall"
            x=17
            y=15
        [/unit]
        [unit]
            facing="ne"
            type="Woodwall"
            x=15
            y=16
        [/unit]
        [unit]
            facing="ne"
            type="Woodwall"
            x=14
            y=16
        [/unit]
        [unit]
            facing="sw"
            type="Woodwall"
            x=13
            y=18
        [/unit]
        [unit]
            facing="se"
            type="Woodwall"
            x=12
            y=19
        [/unit]
        [unit]
            facing="n"
            type="Woodwall"
            x=12
            y=20
        [/unit]
        [unit]
            facing="s"
            type="Woodwall"
            x=12
            y=22
        [/unit]
        [unit]
            facing="se"
            type="Woodwall"
            x=12
            y=24
        [/unit]
        [unit]
            facing="nw"
            type="Woodwall"
            x=12
            y=25
        [/unit]
        [unit]
            facing="s"
            type="Woodwall"
            x=13
            y=27
        [/unit]
        [unit]
            facing="ne"
            type="Woodwall"
            x=14
            y=28
        [/unit]
        [unit]
            facing="ne"
            type="Woodwall"
            x=15
            y=29
        [/unit]
        [unit]
            facing="n"
            type="Woodwall"
            x=17
            y=30
        [/unit]
        [unit]
            facing="se"
            type="Woodwall"
            x=19
            y=31
        [/unit]
        [unit]
            facing="nw"
            type="Slav_Guard_Tower"
            x=22
            y=26
        [/unit]
        [unit]
            facing="nw"
            type="Slav_Guard_Tower"
            x=26
            y=24
        [/unit]
        [unit]
            facing="ne"
            type="Slav_Guard_Tower"
            x=18
            y=24
        [/unit]
        [unit]
            facing="n"
            type="Slav_Guard_Tower"
            x=18
            y=20
        [/unit]
        [unit]
            facing="se"
            type="Slav_Guard_Tower"
            x=22
            y=18
        [/unit]
        [unit]
            facing="n"
            type="Slav_Guard_Tower"
            x=26
            y=20
        [/unit]
        [unit]
            ai_special=guardian
            max_moves=0
            type="Slav_Grand_Guard"
            x=22
            y=21
        [/unit]
        [unit]
            ai_special=guardian
            max_moves=0
            type="Slav_Grand_Guard"
            x=21
            y=23
        [/unit]
        [unit]
            ai_special=guardian
            max_moves=0
            type="Slav_Grand_Guard"
            x=23
            y=23
        [/unit]
        [unit]
            ai_special=guardian
            max_moves=0
            type="Slav_Sharpshooter"
            x=21
            y=22
        [/unit]
        [unit]
            ai_special=guardian
            max_moves=0
            type="Slav_Sharpshooter"
            x=23
            y=22
        [/unit]
        [unit]
            ai_special=guardian
            max_moves=0
            type="Slav_Sharpshooter"
            x=22
            y=23
        [/unit]
        [unit]
            ai_special=guardian
            type="Slav_Sentinel"
            x=21
            y=15
        [/unit]
        [unit]
            ai_special=guardian
            type="Slav_Sentinel"
            x=23
            y=15
        [/unit]
        [unit]
            ai_special=guardian
            type="Slav_Sentinel"
            x=21
            y=30
        [/unit]
        [unit]
            ai_special=guardian
            type="Slav_Sentinel"
            x=23
            y=30
        [/unit]
        [unit]
            ai_special=guardian
            type="Slav_Sentinel"
            x=14
            y=25
        [/unit]
        [unit]
            ai_special=guardian
            type="Slav_Sentinel"
            x=30
            y=25
        [/unit]
        [unit]
            ai_special=guardian
            type="Slav_Sentinel"
            x=30
            y=19
        [/unit]
        [unit]
            ai_special=guardian
            type="Slav_Sentinel"
            x=14
            y=19
        [/unit]
    [/side]
    [side]
	controller="null"
    allow_player=no
	fog=no
	gold=10
	hidden=no
	income=0
	no_leader=yes
	share_vision="all"
	shroud=no
	side=4
	team_name=Pan_North,Pan_South
    user_team_name= _"Mercernaries"

        [unit]
            role=mercs1
            type="Slav_Temsk_Braveheart"
            x=3
            y=13
        [/unit]
        [unit]
            role=mercs1
            type="Slav_Temsk_Braveheart"
            x=2
            y=14
        [/unit]
        [unit]
            role=mercs1
            type="Slav_Temsk_Ravenblade"
            x=2
            y=12
        [/unit]
        [unit]
            role=mercs1
            type="Slav_Temsk_Ravenblade"
            x=1
            y=14
        [/unit]
        [unit]
            role=mercs1
            type="Slav_Temsk_Champion"
            x=1
            y=13
        [/unit]
        [unit]
            role=mercs2
            type="Ogre_Centurion"
            x=43
            y=13
        [/unit]
        [unit]
            role=mercs2
            type="Ogre_Burner"
            x=42
            y=12
        [/unit]
        [unit]
            role=mercs2
            type="Ogre_Burner"
            x=43
            y=14
        [/unit]
        [unit]
            role=mercs2
            type="Ogre_Foreman"
            x=41
            y=13
        [/unit]
        [unit]
            role=mercs2
            type="Ogre_Foreman"
            x=42
            y=14
        [/unit]
        [unit]
            role=mercs3
            type="Ogre_Centurion"
            x=1
            y=32
        [/unit]
        [unit]
            role=mercs3
            type="Ogre_Burner"
            x=1
            y=31
        [/unit]
        [unit]
            role=mercs3
            type="Ogre_Burner"
            x=2
            y=32
        [/unit]
        [unit]
            role=mercs3
            type="Ogre_Foreman"
            x=2
            y=30
        [/unit]
        [unit]
            role=mercs3
            type="Ogre_Foreman"
            x=3
            y=32
        [/unit]
        [unit]
            role=mercs4
            type="Slav_Temsk_Champion"
            x=43
            y=32
        [/unit]
        [unit]
            role=mercs4
            type="Slav_Temsk_Ravenblade"
            x=43
            y=31
        [/unit]
        [unit]
            role=mercs4
            type="Slav_Temsk_Ravenblade"
            x=42
            y=32
        [/unit]
        [unit]
            role=mercs4
            type="Slav_Temsk_Braveheart"
            x=42
            y=30
        [/unit]
        [unit]
            role=mercs4
            type="Slav_Temsk_Braveheart"
            x=41
            y=32
        [/unit]
    [/side]

    {LIMIT_RECRUITS 3 "Slav_Marksman" 10}
    {LIMIT_RECRUITS 3 "Slav_Guard" 10}
    {LIMIT_RECRUITS 3 "Slav_Woodsman" 10}

    {TEMSK_MECENARY_EVENT mercs1}
    {TEMSK_MECENARY_EVENT mercs4}
    {TUMEN_MECENARY_EVENT mercs2}
    {TUMEN_MECENARY_EVENT mercs3}

    {STARTING_VILLAGES 1 5}
    {STARTING_VILLAGES 2 5}
   
    [event]
    name=prestart

    {CAPTURE_VILLAGES_OF_TYPE Gs^Vl 3 22 22 30}
    {CAPTURE_VILLAGES_OF_TYPE Gll^Vl 3 22 22 30}
    {CAPTURE_VILLAGES_OF_TYPE Gs^Vc 3 22 22 30}

    [micro_ai]
            side=3
            ai_type=zone_guardian
            action=add

            [filter]
                type=Slav_Archer,Slav_Militia,Slav_Marksman,Slav_Guard,Slav_Woodsman
            [/filter]
            [filter_location]
                x="10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34"
	            y="17-27,16-29,15-29,15-30,14-30,14-31,13-31,13-32,12-32,12-33,11-33,11-34,11-33,11-34,11-33,12-33,12-32,13-32,13-31,14-31,14-30,15-30,15-29,16-29,17-27"
            [/filter_location]
    [/micro_ai]

    #копать ров

    [set_menu_item]
        id=ncoss_fill_moat
        description=_"Fill water with soil, costs <span color='#2c9fed'>40%</span> of this unit's moves"
        image="fillicon.png"
        [show_if]
        [/show_if]

        [filter_location]
            terrain=W*
            [not]
                terrain=Wwf
            [/not]
            [and]
            [filter]
                side=1,2
                formula=($this_unit.moves >= $this_unit.max_moves * 0.4)
                [not]
                    race=mechanical
                [/not]
            [/filter]
            radius=1
            [/and]
            #cannot fill water under AI units
            [not]
                [filter]
                    side=3-5
                [/filter]
            [/not]
        [/filter_location]
        [command]
    [store_unit]
       [filter]
            side=1,2
            formula=($this_unit.moves >= $this_unit.max_moves * 0.4)
            [not]
                race=mechanical
            [/not]
            [filter_location]
                x,y=$x1,$y1
                radius=1
            [/filter_location]
       [/filter]
       variable=able_to_fill
    [/store_unit]

    [if]
    [variable]
        name=able_to_fill.length
        greater_than=0
    [/variable]
    [then]

    {VARIABLE filler_random_limit $able_to_fill.length}
    {VARIABLE_OP filler_random_limit sub 1}
    {RANDOM 0..$filler_random_limit}

#since the array number is offset by one from the length (if there are 2 units, the length is 2, but the units are [0] and [1])

#the exp is calculated based on cost and level
#    {VARIABLE tmp_filler_exp 1}
#    {VARIABLE_OP able_to_fill[$random].experience add $tmp_filler_exp}
    {VARIABLE fillmoves $able_to_fill[$random].max_moves}
    {VARIABLE_OP fillmoves multiply 0.4}
    {VARIABLE_OP able_to_fill[$random].moves sub $fillmoves}

    [unstore_unit]
        variable=able_to_fill[$random]
        find_vacant=no
    [/unstore_unit]

    [sound]
    	name=axe.ogg
    [/sound]
    [delay]
    	time=200
    [/delay]
    [sound]
    	name=mud-fist.ogg
    [/sound]
    [delay]
    	time=200
    [/delay]
    [sound]
    	name=water-blast.wav
    [/sound]

    [if]
    [have_location]
        terrain=Wo*
        x,y=$x1,$y1
    [/have_location]
    [then]
    [terrain]
    terrain=Ww
    x,y=$x1,$y1
    layer=base
    [/terrain]
    [/then]
    [else]
    [terrain]
    terrain=Wwf
    x,y=$x1,$y1
    layer=base
    [/terrain]
    [/else]
    [/if]

    [/then]
    [/if]
    {CLEAR_VARIABLE filler_random_limit}
    {CLEAR_VARIABLE tmp_filler_exp}
    {CLEAR_VARIABLE fillmoves}

        [/command]
    [/set_menu_item]
    [/event]

    [event]
    name=start

    [message]
    speaker=Pan_South
    message=_ "We defeated their army and surrounded the city. Let the contest begin!"
    [/message]
    [message]
    speaker=Pan_North
    message=_ "You're right! But be warned: though we are allies in this war, I will destroy your warriors if they try to steal my triumph!"
    [/message]
    [message]
    speaker=Pan_South
    message=_ "Ha ha! Then I can say the same thing. Let's do it!"
    [/message]

    [objectives]
            side=1,2
            [objective]
                description= _ "Kill the leader of the city"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of city leader by hands of other's Pan warriors"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of your leader"
                condition=lose
            [/objective]
            [note]
                description=_ "There are mercenary camps on the map. You can hire them for money to ease a siege, or to spite another Pan."
            [/note]
            [note]
                description=_"Your units can fill water tiles with soil (turning deep water into shallow water, and shallow water into ford) via a rightclick menu (costs moves though)"
            [/note]
    [/objectives]
    [/event]
    [event]
    name=die

        [filter]
            id=slav_leader
        [/filter]
        [message]
        side=$second_unit.side
        canrecruit=yes
        message=_ "Ha-ha, I win! This city will belong to me! I can't wait to make a victory feast of its inhabitants!"
        [/message]
        [message]
        [not]
            side=$second_unit.side
        [/not]
        canrecruit=yes
        message=_ "Yours has. Celebrate your victory soon, and then we'll continue our campaign."
        [/message]

        [endlevel]
        side=$second_unit.side
        result=victory
        [/endlevel]
    [/event]
[/multiplayer]
